language: python

matrix:
  include:
    - python: 2.7
      env: TOXENV=py27
    - python: 3.5
      env: TOXENV=py35
    - python: 3.6
      env: TOXENV=py36

addons:
  apt:
    packages:
      - libatlas-dev
      - liblapack-dev
      - python-numpy

before_install:
  # Show information about CPU running job to understand BLAS issues
  - sudo lshw -class processor
  # Fix for headless TravisCI
  #   https://stackoverflow.com/questions/35403127
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  #- sleep 3  # give xvfb some time to start  # TODO: reinstate?
  # Source recipe to install packages
  - pip install pytest pytest-xdist pytest-randomly tox codecov

script: tox

notifications:
  email: false

after_success:
  - codecov
